(function(){(function(a){return a.fn.ajaxChosen=function(y,z){var b,v,r,i;b={minLength:3,queryLimit:10,delay:100,chosenOptions:{},searchingText:"Searching...",noresultsText:"No results."};a.extend(b,y);b.chosenOptions.no_results_text=b.searchingText;v=(r=this.attr("multiple")!=null)?".search-field > input":".chzn-search > input";i=this;this.chosen(b.chosenOptions);return this.next(".chzn-container").find(v).bind("keyup",function(){var w=this;this.previousSearch&&clearTimeout(this.previousSearch);
return this.previousSearch=setTimeout(function(){var q,j,e,s,m;e=a(w);m=a.trim(e.attr("value"));s=(q=e.data("prevVal"))!=null?q:"";e.data("prevVal",m);q=function(){return(r?e.parent().parent().siblings():e.parent().parent()).find(".no-results").html(b.noresultsText+" '"+a(w).attr("value")+"'")};if(m.length<b.minLength||m===s){q();return false}j=i.find("option");if(j.length<b.queryLimit&&m.indexOf(s)===0&&s!==""){q();return false}b.term=m;return z(b,function(t,x){var f,n,g,h,u;if(e.is(":focus")){n=
[];a.each(t,function(o,c){var d;d=a("<option>");d.attr("value",o).html(c);return n.push(a(d))});g=function(o){var c,d;c=a(o);if(!(c.attr("selected")&&r))if(!(c.attr("value")===""&&c.html()===""&&!r))if(function(){var k,l,p;p=[];k=0;for(l=n.length;k<l;k++){d=n[k];d.attr("value")===c.attr("value")&&p.push(d)}return p}().length===0)return c.remove()};h=0;for(u=j.length;h<u;h++){f=j[h];g(f)}j=i.find("option");g=function(o){var c,d,k,l,p;d=false;k=function(A){if(a(A).attr("value")===o.attr("value"))return d=
true};l=0;for(p=j.length;l<p;l++){c=j[l];k(c)}if(!d)return i.append(o)};h=0;for(u=n.length;h<u;h++){f=n[h];g(f)}f=e.val();if(a.isEmptyObject(t)){g=a("<option>");g.addClass("no-results");g.html(b.noresultsText+" '"+f+"'").attr("value","");i.append(g)}else i.change();i.trigger("liszt:updated");a(".no-results").removeClass("active-result");e.val(f);if(!a.isEmptyObject(t)){f=a.Event("keydown");f.which=40;e.trigger(f)}if(x)return x(t)}})},b.delay)})}})(jQuery)}).call(this);
